import Meta from "../../../../components/Meta";

<Meta />




# How it works

##

<br/>

* ## Working
  
  <br/>
  
  * Auth plugin instance will be registered as a service inside our **backend-engine**.
  
  
  <br/>
  
  
  
  * Auth plugin instance will be running with a **Dapr Sidecar** which
  is managed by your **Backend-Engine** plugin.
  
  
  <br/>
  
  
  
  * Behind the scenes your auth plugin instance is written in **Express App** 
  which is connected with your **Glue Plugin Backend-Engine**, **Glue Plugin Graphql** which is
  running behind the scene.
  
  
  <br/>
  
  * Your **Backend-Engine** plugin will treat **auth plugin instance** as
  a seperatre independent microservice. Behind the scene it will handle everything.
  Like providing you baseurl to interact with your authentication service.
  
  <br/>

  * If the **auth** plugin is installed correctly, then you will get a folder named auth
  inside your **services** folder, where your whole logic of authentication is written.

  <br/>
  
  * Your directory stucture for the **Auth Plugin Instance** should be something
    like this:
    <br/>

    ```jsx
      ðŸ“¦auth
        â”£ ðŸ“‚components
        â”£ ðŸ“‚src
        â”ƒ â”£ ðŸ“‚controllers
        â”ƒ â”ƒ â”£ ðŸ“‚authentication
        â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚graphql
        â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œmutations.ts
        â”ƒ â”ƒ â”ƒ â”ƒ â”— ðŸ“œqueries.ts
        â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚handlers
        â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œindex.ts
        â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œrefresh-jwt-token.ts
        â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œsignin.ts
        â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œsignup.ts
        â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œsocialSignin.ts
        â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œsocialSignup.ts
        â”ƒ â”ƒ â”ƒ â”ƒ â”— ðŸ“œuser.ts
        â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚models
        â”ƒ â”ƒ â”ƒ â”ƒ â”— ðŸ“œuser.ts
        â”ƒ â”ƒ â”ƒ â”— ðŸ“œhelpers.ts
        â”ƒ â”ƒ â”— ðŸ“œcommons.ts
        â”ƒ â”£ ðŸ“‚providers
        â”ƒ â”ƒ â”£ ðŸ“œRoutes.ts
        â”ƒ â”ƒ â”£ ðŸ“œexpress.ts
        â”ƒ â”ƒ â”£ ðŸ“œlocals.ts
        â”ƒ â”ƒ â”— ðŸ“œpassport.ts
        â”ƒ â”£ ðŸ“‚routes
        â”ƒ â”ƒ â”£ ðŸ“œ.gitkeep
        â”ƒ â”ƒ â”— ðŸ“œauthentication.ts
        â”ƒ â”— ðŸ“œindex.ts
        â”£ ðŸ“‚views
        â”ƒ â”— ðŸ“œtoken.html
        â”£ ðŸ“œ.env
        â”£ ðŸ“œREADME.md
        â”£ ðŸ“œpackage.json
        â”£ ðŸ“œrouter.js
        â”£ ðŸ“œtsconfig.json
        â”— ðŸ“œtslint.json
    ```
  <br/>
  <br/>
  
  * In order to start this plugin you need to run the following command:
    
    <br/>
    
    ```bash
      $ node glue develop:up
    ```
    
    <br/>

    This command will start running the docker image of all the instances
    and plugin you have created. Here, in this case it will start running
    your **auth plugin instance**, inside your **Backend-Engine** container.
  
  <br/>
  
  * In order to interact with this plugin there is a file named **router.js**
    present in root directory of the instance. If you open that **router.js** 
    file, you will see a string value attached to a key named **path**, this
    is the string which you need to append after your nginx url(http://localhost:9090).
  
    In my case my path value will be something like this:
    
      ```jsx
      module.exports = () => [
        {
          "path": "/backend/auth/(.*)",
          "proxy": {
          "instance": "auth:3500",
          "path": "/v1.0/invoke/auth/method/$1"
          }
        }
      ];
      ```
    
    <br/>
    
    So in order to access my **auth plugin instance** its base url should be
    something like this,
      
      
    **http://localhost:9090/backend/auth**
  
  <br/>

* ## Instructions to start development of auth plugin instance
  
  <br/>
  
  * Inside your **auth instance directory** you will see that there is
  directory named **src** in which there is **express** app wirtten in 
  **typescript**. You can go ahead and start your development from there.













